<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
        <meta content="../images/fav.ico" itemprop="image">
        <link rel="icon" href="images/fav.ico">
        <link rel="stylesheet" type="text/css" href="../css/one.css">
        <script src="../js/jquery-1.11.1.min.js" type="text/javascript"></script>
        <link rel="import" href="../bower_components/core-header-panel/core-header-panel.html">
        <link rel="import" href="../bower_components/core-drawer-panel/core-drawer-panel.html">
        <link rel="import" href="../bower_components/core-menu/core-menu.html">
        <link rel="import" href="../bower_components/paper-item/paper-item.html">
        <title>1Self</title>
    </head>
    <body>
        <div class="header-wrapper">
            <header class="page-nav">
                <div class="logo">
                    <a href="../index.html"><img src="../images/logo.png" alt="logo"/></a>
                </div>
                <div class="mobile-only-nav nav-toggle" core-drawer-toggle>
                    <div></div>
                    <div></div>
                    <div></div>
                </div>
                <nav class="nav-right" id="collapse-link">
                    <a class="nav-link nav-toggle" href="#learn-more">LEARN MORE
                        <span>
                        <img src="../images/link-dot.png" alt=""/>
                        </span>
                    </a>
                    <a class="nav-link nav-toggle" href="../quest.html">QUEST
                        <span>
                        <img src="../images/link-dot.png" alt=""/>
                        </span>
                    </a>
                    <a class="button signupButton nav-toggle" href="../index.html#signup">SIGN UP</a>
                </nav>
            </header>
        </div>
        <core-drawer-panel>

        <core-header-panel drawer style="margin-top: 100px;">
        <nav>
        <core-menu id="drawer_menu" class="menu">
            <paper-item noink onclick="changePage('#!/1self')">1self</paper-item>
            <paper-item noink onclick="changePage('#!/features')">Features</paper-item>
            <paper-item noink onclick="changePage('#!/pricing')">Pricing</paper-item>
            <paper-item noink onclick="changePage('#!/api')">Get API Key</paper-item>
            <paper-item noink onclick="changePage('#!/resources')">Dev Resources</paper-item>
            <paper-item noink onclick="changePage('#!/faq')">FAQ</paper-item>
        </core-menu>
        </nav>
        </core-header-panel>
        
        <core-header-panel main style="margin-top: 100px;">
        <div id="content-container" style="padding: 20px;">

        </div>
        </core-header-panel>
</core-drawer-panel>
<script src="../js/app.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function(){

        window.changePage = function (route) {
            history.pushState({tabPath: route}, '', route);
            fetchPage(route);
        }

        window.fetchPage = function(route) {
            var map = {
                '#!/1self': {path: '1self.html', index: 0},
                '#!/features': {path: 'features.html', index: 1},
                '#!/pricing': {path: 'pricing.html', index: 2},
                '#!/api': {path: 'api.html', index: 3},
                '#!/resources': {path: 'resources.html', index: 4},
                '#!/faq': {path: 'faq.html', index: 5}
            };
            if(!map[route]) return;

            var path = map[route].path;

            var selector = "#content-container";
            $.ajax({
                url: path,
                contentType: 'application/html; charset=UTF-8',
                type: 'GET',
                dataType: 'html'
            })
            .success(function(result){
                $(selector).html(result);
                document.querySelector('core-menu').selected = activeFragment = map[route].index;
            })
            .error(function(xhr, status){
                console.log(new Error(status));
            })
        };

        var handleRoute = function(){
            if(location.hash.length > 0) {
                fetchPage(location.hash);
            } else {
                history.pushState({tabPath: "#!/1self"}, '', "#!/1self");
            }
        };

        window.onpopstate = function(event){
            var state = window.history.state;
            if(state){
                fetchPage(state.tabPath);
            }
        };

        window.onhashchange = handleRoute();
        window.onload = function(){
            fetchPage(location.hash);
        }

    })
</script>
</body>
</html>